# é…ç½®åç§°: Egern é…ç½®
# é…ç½®ä½œè€…: Centralmatrix3
# æ›´æ–°æ—¶é—´: 25-08-03 00:00

# [ç«¯å£è®¾ç½®]
http_port: 8200     # HTTP  ä»£ç†ç«¯å£
socks_port: 8300    # SOCKS ä»£ç†ç«¯å£

# [é€šç”¨è®¾ç½®]
ipv6: false         # å¯ç”¨IPv6
vif_only: true      # ä»£ç†æ¨¡å¼
compat_route: false # å…¼å®¹æ¨¡å¼
direct_latency_test_url: http://taobao.com/
proxy_latency_test_url: http://cp.cloudflare.com/generate_204
geoip_db_url: https://github.com/Masaiki/GeoIP2-CN/raw/release/Country.mmdb

# [DNSè®¾ç½®]
dns:
  bootstrap:
    - 233.5.5.5
    - 119.29.29.29
  upstreams:
    SecureDNS:
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
  forward:
    - wildcard:
        match: '*'
        value: SecureDNS
  public_ip_lookup_url: https://ifconfig.me/ip

# [ç­–ç•¥ç»„]
policy_groups:
  - external:
      name: è‡ªè¡Œé€‰æ‹©
      type: select
      urls:
        - è®¢é˜…é“¾æ¥ # ğŸ§¸
      filter: ^
      interval: 1800
      tolerance: 50
      timeout: 5
      update_interval: 86400
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Static.png
      hidden: false

  - select:
      name: è‹¹æœæœåŠ¡
      policies:
        - DIRECT
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Apple-2.png
      hidden: false

  - select:
      name: æ¸¯å°ç•ªå‰§
      policies:
        - DIRECT
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/StreamingSE.png
      hidden: false

  - select:
      name: å›½å†…åª’ä½“
      policies:
        - DIRECT
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/StreamingCN.png
      hidden: false

  - select:
      name: å›½é™…åª’ä½“
      policies:
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - DIRECT
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Streaming.png
      hidden: false

  - select:
      name: å…¨çƒåŠ é€Ÿ
      policies:
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - DIRECT
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Global.png
      hidden: false

  - select:
      name: é»‘ç™½åå•
      policies:
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - DIRECT
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Final.png
      hidden: false

  - auto_test:
      name: è‡ªåŠ¨é€‰æ‹©
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: ^
      interval: 1800
      tolerance: 50
      timeout: 5
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Available.png
      hidden: false

  - auto_test:
      name: é¦™æ¸¯èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: é¦™æ¸¯|æ¸¯|HK|ğŸ‡­ğŸ‡°|(?i)Hong
      interval: 1800
      tolerance: 50
      timeout: 5
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/HK.png
      hidden: false

  - auto_test:
      name: å°æ¹¾èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: å°æ¹¾|å°|TW|ğŸ‡¹ğŸ‡¼|(?i)Taiwan
      interval: 1800
      tolerance: 50
      timeout: 5
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/TW.png
      hidden: false

  - auto_test:
      name: æ—¥æœ¬èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: æ—¥æœ¬|æ—¥|JP|ğŸ‡¯ğŸ‡µ|(?i)Japan
      interval: 1800
      tolerance: 50
      timeout: 5
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/JP.png
      hidden: false

  - auto_test:
      name: éŸ©å›½èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: éŸ©å›½|éŸ©|KR|ğŸ‡°ğŸ‡·|(?i)Korea
      interval: 1800
      tolerance: 50
      timeout: 5
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/KR.png
      hidden: false

  - auto_test:
      name: ç‹®åŸèŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: æ–°åŠ å¡|ç‹®|SG|ğŸ‡¸ğŸ‡¬|(?i)Singapore
      interval: 1800
      tolerance: 50
      timeout: 5
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/SG.png
      hidden: false

  - auto_test:
      name: ç¾å›½èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: ç¾å›½|ç¾|US|ğŸ‡ºğŸ‡¸|(?i)States
      interval: 1800
      tolerance: 50
      timeout: 5
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/US.png
      hidden: false

# [åˆ†æµè§„åˆ™]
rules:
  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/Unbreak.yaml
      policy: DIRECT
      update_interval: 86400
      disabled: false

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/Advertising.yaml
      policy: REJECT
      update_interval: 86400
      disabled: false

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/HMTMedia.yaml
      policy: æ¸¯å°ç•ªå‰§
      update_interval: 86400
      disabled: false

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/ChinaMedia.yaml
      policy: å›½å†…åª’ä½“
      update_interval: 86400
      disabled: false

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/GlobalMedia.yaml
      policy: å›½é™…åª’ä½“
      update_interval: 86400
      disabled: false

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/Global.yaml
      policy: å…¨çƒåŠ é€Ÿ
      update_interval: 86400
      disabled: false

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/Apple.yaml
      policy: è‹¹æœæœåŠ¡
      update_interval: 86400
      disabled: false

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/LAN.yaml
      policy: DIRECT
      update_interval: 86400
      disabled: false

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/GEOIPCN.yaml
      policy: DIRECT
      update_interval: 86400
      disabled: false

  - default:
      policy: é»‘ç™½åå•

# [MITM]
mitm:
  enabled: true
  hostnames:
    excludes:
      - buy.itunes.apple.com