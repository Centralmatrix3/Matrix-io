# é…ç½®åç§°: Egern é…ç½®
# é…ç½®ä½œè€…: Centralmatrix3
# æ›´æ–°æ—¶é—´: 24-04-05 00:00

http_port: 8200     # HTTP  ä»£ç†ç«¯å£
socks_port: 8300    # SOCKS ä»£ç†ç«¯å£
vif_only: true      # VIF   æ¨¡å¼

# å¸¸è§„DNSæœåŠ¡å™¨
dns_servers:
  - 233.5.5.5
  - 119.29.29.29

# åŠ å¯†DNSæœåŠ¡å™¨
secure_dns:
  servers:
    - https://dns.alidns.com/dns-query

# å…è®¸å¤–éƒ¨é“¾æ¥
allow_external_connections: false

# è‡ªå®šä¹‰æ•°æ®åº“
geoip_db_url: https://github.com/Masaiki/GeoIP2-CN/raw/release/Country.mmdb

# ç­–ç•¥ç»„
policy_groups:
  - external:
      name: è‡ªè¡Œé€‰æ‹©
      type: select
      urls:
        - è®¢é˜…é“¾æ¥ # ğŸ§¸
      update_interval: 86400
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Static.png

  - select:
      name: è‹¹æœæœåŠ¡
      policies:
        - DIRECT
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Apple-2.png

  - select:
      name: æ¸¯å°ç•ªå‰§
      policies:
        - DIRECT
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/StreamingSE.png

  - select:
      name: å›½å†…åª’ä½“
      policies:
        - DIRECT
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/StreamingCN.png

  - select:
      name: å›½é™…åª’ä½“
      policies:
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - DIRECT
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Streaming.png

  - select:
      name: å…¨çƒåŠ é€Ÿ
      policies:
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - DIRECT
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Global.png

  - select:
      name: é»‘ç™½åå•
      policies:
        - è‡ªè¡Œé€‰æ‹©
        - è‡ªåŠ¨é€‰æ‹©
        - DIRECT
        - é¦™æ¸¯èŠ‚ç‚¹
        - å°æ¹¾èŠ‚ç‚¹
        - æ—¥æœ¬èŠ‚ç‚¹
        - éŸ©å›½èŠ‚ç‚¹
        - ç‹®åŸèŠ‚ç‚¹
        - ç¾å›½èŠ‚ç‚¹
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Final.png

  - auto_test:
      name: è‡ªåŠ¨é€‰æ‹©
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: ^
      interval: 1800
      tolerance: 50
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Available.png

  - auto_test:
      name: é¦™æ¸¯èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: é¦™æ¸¯|æ¸¯|HK|ğŸ‡­ğŸ‡°|(?i)Hong
      interval: 1800
      tolerance: 50
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/HK.png

  - auto_test:
      name: å°æ¹¾èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: å°æ¹¾|å°|TW|ğŸ‡¹ğŸ‡¼|(?i)Taiwan
      interval: 1800
      tolerance: 50
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/TW.png

  - auto_test:
      name: æ—¥æœ¬èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: æ—¥æœ¬|æ—¥|JP|ğŸ‡¯ğŸ‡µ|(?i)Japan
      interval: 1800
      tolerance: 50
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/JP.png

  - auto_test:
      name: éŸ©å›½èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: éŸ©å›½|éŸ©|KR|ğŸ‡°ğŸ‡·|(?i)Korea
      interval: 1800
      tolerance: 50
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/KR.png

  - auto_test:
      name: ç‹®åŸèŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: æ–°åŠ å¡|ç‹®|SG|ğŸ‡¸ğŸ‡¬|(?i)Singapore
      interval: 1800
      tolerance: 50
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/SG.png

  - auto_test:
      name: ç¾å›½èŠ‚ç‚¹
      policies:
        - è‡ªè¡Œé€‰æ‹©
      flatten: true
      filter: ç¾å›½|ç¾|US|ğŸ‡ºğŸ‡¸|(?i)States
      interval: 1800
      tolerance: 50
      icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/US.png

# åˆ†æµè§„åˆ™
rules:
  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/Unbreak.yaml
      policy: DIRECT
      update_interval: 86400

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/AdBlock.yaml
      policy: REJECT
      update_interval: 86400

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/Streaming.yaml
      policy: å›½é™…åª’ä½“
      update_interval: 86400

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/StreamingSE.yaml
      policy: æ¸¯å°ç•ªå‰§
      update_interval: 86400

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/StreamingCN.yaml
      policy: å›½å†…åª’ä½“
      update_interval: 86400

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/Global.yaml
      policy: å…¨çƒåŠ é€Ÿ
      update_interval: 86400

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/Apple.yaml
      policy: è‹¹æœæœåŠ¡
      update_interval: 86400

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/LAN.yaml
      policy: DIRECT
      update_interval: 86400

  - rule_set:
      match: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Ruleset/GEOIPCN.yaml
      policy: DIRECT
      update_interval: 86400

  - default:
      policy: é»‘ç™½åå•

# MITM
mitm:
  enabled: true     # æ˜¯å¦å¯ç”¨

# æ¨¡å—
modules:
  - name: é«˜å¾·å»å¹¿å‘Š
    url: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Rewrite/AMAP.yaml
    update_interval: 86400
    enabled: true

  - name: å“”ç«™å»å¹¿å‘Š
    url: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Rewrite/BiliBili.yaml
    update_interval: 86400
    enabled: true

  - name: å¾®åšå»å¹¿å‘Š
    url: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Rewrite/WeiBo.yaml
    update_interval: 86400
    enabled: true

  - name: æ²¹ç®¡å»å¹¿å‘Š
    url: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Rewrite/YouTube.yaml
    update_interval: 86400
    enabled: true

  - name: é‡å®šå‘æ¨¡å—
    url: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Egern/Rewrite/Redirect.yaml
    update_interval: 86400
    enabled: true